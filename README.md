# 图书借阅管理系统

这是一个基于Flask和MySQL的简单图书借阅管理系统，支持不同用户角色（管理员、老师、学生）的登录和相应的功能操作。

## 功能特点

- 用户认证：支持不同角色用户登录
- 图书管理：查看、添加图书
- 借阅管理：借阅和归还图书
- 权限控制：基于用户角色的权限控制
- 借阅限制：不同角色有不同的最大借阅数量限制

## 系统角色

- **管理员**：可以管理用户、图书和查看所有借阅记录
- **老师**：可以借阅最多5本书
- **学生**：可以借阅最多3本书

## 安装与设置

### 前提条件

- Python 3.6+
- MySQL 5.7+

### 安装步骤

1. 克隆或下载项目到本地

2. 安装依赖包
   ```
   pip install -r requirements.txt
   ```

3. 配置数据库
   - 在MySQL中创建数据库并导入初始SQL脚本
   - 修改`app.py`中的数据库连接配置

   ```python
   db_config = {
       'host': 'localhost',
       'user': '你的MySQL用户名',
       'password': '你的MySQL密码',
       'database': 'LibraryDB',
       'charset': 'utf8mb4',
       'cursorclass': pymysql.cursors.DictCursor
   }
   ```

4. 运行应用
   ```
   python app.py
   ```

5. 在浏览器中访问 `http://127.0.0.1:5000`

## 初始用户

系统需要手动添加初始管理员用户：

1. 登录MySQL并执行以下SQL语句：

```sql
INSERT INTO users (username, password, role_id) VALUES ('admin', 'admin123', 1);
```

2. 使用以下凭据登录系统：
   - 用户名：admin
   - 密码：admin123

## 使用说明

1. 管理员登录后可以：
   - 添加新用户（管理员、老师或学生）
   - 添加新图书
   - 查看所有借阅记录

2. 所有用户都可以：
   - 查看图书列表
   - 借阅图书（受最大借阅数量限制）
   - 归还已借阅的图书
   - 查看个人借阅记录

## 注意事项

- 本系统仅用于教学演示，生产环境使用需增强安全性
- 密码存储采用明文方式，实际应用中应使用加密存储
- 数据库触发器已实现借阅数量限制功能